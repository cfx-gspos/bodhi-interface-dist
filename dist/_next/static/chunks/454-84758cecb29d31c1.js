"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{32964:function(e,t,n){var r=n(64836);t.Z=void 0;var s=r(n(64938)),a=n(85893);t.Z=(0,s.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline")},92900:function(e,t,n){n.d(t,{M:function(){return c}});var r=n(85893),s=n(47726),a=n(5616),i=n(15861),l=n(87952);n(67294);let c=e=>{let{sender:t,blockTimestamp:n,spaceUserInfo:c,imgWidth:o,showSpaceId:d,handleClick:u,MoreBox:x}=e,{avatar:h,spacename:p}=(0,s.Dm)(t,c);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer"},component:"div",onClick:()=>{u&&u()},children:[d&&(0,r.jsxs)(i.Z,{variant:"main16",sx:{mr:2},children:["#",null==c?void 0:c.spaceId]}),(0,r.jsx)(l.Z,{sx:{width:o?"".concat(o,"px"):"36px",height:o?"".concat(o,"px"):"36px"},alt:p,src:h}),(0,r.jsxs)(a.Z,{sx:{ml:2},children:[(0,r.jsx)(i.Z,{variant:"main16",children:p}),(0,r.jsx)(i.Z,{variant:"secondary14",color:"text.secondary",children:(0,s.Xe)(t,4,4)})]})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:3},children:[n&&(0,r.jsx)(a.Z,{children:(0,r.jsx)(i.Z,{variant:"secondary14",color:"text.secondary",children:(0,s.i$)(n)})}),x&&(0,r.jsx)(a.Z,{children:x})]})]})}},60355:function(e,t,n){n.d(t,{H:function(){return x}});var r=n(85893),s=n(5616),a=n(69417),i=n(15861),l=n(49479),c=n(20261),o=n(31065),d=n(64032),u=n(97975);let x=e=>{let{totalSupply:t,assetId:n,handleClick:x,showUnit:h}=e,{setType:p}=(0,d.a)(),{account:f,ethPrice:m,setWalletModalOpen:v}=(0,o.Yh)(),{data:g,error:y}=(0,u.k)(n,t);async function j(){f?(p(d.w.AssetBuy),x&&x()):v(!0)}return(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(a.Z,{variant:"text",startIcon:(0,r.jsx)(c.Z,{}),sx:{padding:"2px 0px",minWidth:"20px"},onClick:()=>{j()},children:(0,r.jsx)(l.B,{value:!y&&g?g*(null!=m?m:0):0,symbol:"USD",variant:"secondary16",symbolsVariant:"secondary16",visibleDecimals:3})}),h&&(0,r.jsx)(i.Z,{color:"text.secondary",sx:{ml:4},component:"div",onClick:()=>{j()},children:(0,r.jsx)(l.B,{value:null!=g?g:0,variant:"secondary14",compact:!0,visibleDecimals:3,symbol:"CFX/Share"})})]})}},85119:function(e,t,n){n.d(t,{p:function(){return c}});var r=n(85893),s=n(69417),a=n(49479),i=n(78878),l=n(11163);let c=e=>{let{assetId:t,holdersCount:n,handleClick:c}=e,o=(0,l.useRouter)();return(0,r.jsx)(s.Z,{variant:"text",startIcon:(0,r.jsx)(i.Z,{}),sx:{padding:"2px 6px",minWidth:"20px"},onClick:()=>{c&&c(),o.push("/asset-overview/?assetid=".concat(t))},children:(0,r.jsx)(a.B,{value:null!=n?n:0,variant:"secondary16",symbolsVariant:"secondary16",visibleDecimals:0})})}},17567:function(e,t,n){n.d(t,{e:function(){return Z}});var r=n(85893),s=n(5616),a=n(93946),i=n(53219),l=n(35294),c=n(18972),o=n(15861),d=n(59334),u=n(79369),x=n(67294),h=n(46907),p=n(11359),f=n(10084),m=n(31065),v=n(74187),g=n(77294),y=n(2593),j=n(91783),I=n(19215);let Z=e=>{var t;let{assetId:n,assetData:Z}=e,{account:b,signer:w,spaceUserInfo:C}=(0,m.Yh)(),{refetchBodhiData:k}=(0,I.n)(),[S,F]=(0,x.useState)(null),H=!!S,B=()=>{F(null)};async function D(){try{let e=v.TT[v.KY].bodhi,t=new g.CH(e,j,w),r={from:b,to:e,value:y.O$.from(0),data:t.interface.encodeFunctionData("remove",[n])},s=await t.provider.estimateGas(r);console.log("gasLimit:",s.toNumber());let a=null==w?void 0:w.sendTransaction({...r,gasLimit:s});null==a||a.then(e=>{e.wait().then(e=>{1===e.status?(0,f.L)(!0,"Remove Success."):(0,f.L)(!1,"Confirm failure."),k&&k()}).catch(e=>{(0,f.L)(!1,e.reason)})}).catch(e=>{(0,f.L)(!1,e.reason)})}catch(e){-32603===e.code&&-32015==e.data.code?(0,f.L)(!1,"Insufficient funds for gas."):(0,f.L)(!1,"Confirm failure.")}}return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:18,height:18,borderRadius:"50%",p:0,minWidth:0},onClick:e=>{F(e.currentTarget)},children:(0,r.jsx)(i.Z,{sx:{fontSize:18,color:H?"info.main":"text.muted",borderRadius:"50%","&:hover":"info.main"},children:(0,r.jsx)(u.Z,{fontSize:"medium",sx:{color:"#d7e2e3"}})})}),(0,r.jsxs)(l.Z,{id:"withdraw-item-extra-menu",anchorEl:S,open:H,onClose:B,keepMounted:!0,PaperProps:{sx:{minWidth:"120px",py:0}},sx:{"& .MuiMenu-paper":{backgroundColor:"#2e2c56",boxShadow:"3px 3px 2px #1e1d35"}},children:[(0,r.jsxs)(c.Z,{sx:{gap:2},onClick:()=>{B(),(0,f.L)(!1," Coming soon!")},children:[(0,r.jsx)(p.Z,{color:"info",fontSize:"small"}),(0,r.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(d.Z,{sx:{},children:"Share on"}),(0,r.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{height:"14px"},children:(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z",fill:"#ffffff"})})})]})]}),b==(null===(t=Z.creator)||void 0===t?void 0:t.address)&&(null==C?void 0:C.descriptionAssetId)!==n.toString()?(0,r.jsxs)(c.Z,{sx:{gap:2},onClick:()=>{B(),D()},children:[(0,r.jsx)(h.Z,{color:"error",fontSize:"small"}),(0,r.jsx)(d.Z,{sx:{color:"#ff0000"},children:"Delete"})]}):(0,r.jsx)(r.Fragment,{})]})]})}},48454:function(e,t,n){n.d(t,{$:function(){return b}});var r=n(85893),s=n(90629),a=n(5616),i=n(67294),l=n(59242),c=n(11163),o=n(31065),d=n(97975),u=n(92900),x=n(47781),h=e=>{let{content:t}=e,n=function(e){if(!e)return"";let t=e.replace(/<[^>]*>?/gm,""),n=t.slice(0,140);return n.length<t.length?n+"...":n}(t),s=function(e){if(!e)return null;let t=/<img[^>]+src=['"]([^'"]+)['"][^>]*>/g.exec(e);if(t){let e=t[1];return(0,r.jsx)("img",{src:e,alt:"Arweave Image",width:"100%",style:{maxHeight:"80px",borderRadius:"4px"}})}return null}(t);return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{flex:"1 1 auto"},children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n},style:{lineHeight:"24px",letterSpacing:"0.05em",cursor:"pointer"}})}),s&&(0,r.jsx)(a.Z,{sx:{width:"120px",minHeight:"80px",flex:"0 0 auto"},component:"div",className:"content-view-img",children:s})]})})},p=n(69417),f=n(49479),m=n(32964);let v=e=>{let{replyCount:t,handleClick:n}=e,{account:s,setWalletModalOpen:a}=(0,o.Yh)();async function i(){s?n&&n():a(!0)}return(0,r.jsx)(p.Z,{variant:"text",startIcon:(0,r.jsx)(m.Z,{}),sx:{padding:"2px 6px",minWidth:"20px"},onClick:()=>{i()},children:(0,r.jsx)(f.B,{value:null!=t?t:0,variant:"secondary16",symbolsVariant:"secondary16",visibleDecimals:0})})};var g=n(60355),y=n(85119),j=n(17567),I=e=>{let{content:t}=e,n=function(e){if(!e)return"";let t=e.replace(/<[^>]*>?/gm,""),n=t.slice(0,110);return n.length<t.length?n+"...":n}(t),s=function(e){if(!e)return null;let t=/<img[^>]+src=['"]([^'"]+)['"][^>]*>/g.exec(e);if(t){let e=t[1];return(0,r.jsx)("img",{src:e,alt:"Arweave Image",style:{width:"80px",height:"80px"}})}return null}(t);return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{flex:"1 1 auto"},children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n},style:{lineHeight:"24px",letterSpacing:"0.05em",cursor:"pointer"}})}),s&&(0,r.jsx)(a.Z,{sx:{width:"80px",height:"80px",flex:"0 0 auto"},component:"div",className:"content-view-img",children:s})]})})},Z=n(85518);let b=e=>{var t,n,p,f,m,b;let{create:w}=e,{currentTimestamp:C}=(0,o.Yh)(),{setTempAssetModal:k}=(0,x.R)(),S=(0,c.useRouter)(),{loading:F,error:H,data:B,refetch:D}=(0,l.iG)([Number(w.assetId)]),{loading:T,error:q,data:L,refetch:M}=(0,l.DI)([Number(w.assetId)]),{loading:Y,error:_,data:A,refetch:P}=(0,l.aB)([w.sender]),z=(0,d.lv)([w.arTxId]),K=(0,i.useMemo)(()=>B&&B.assets.length>0?B.assets[0]:void 0,[B]);function N(e){var t,n;k({id:e.id,assetId:e.assetId,arTxId:e.arTxId,sender:e.sender,blockTimestamp:e.blockTimestamp,transactionHash:e.transactionHash,contentData:null===(t=z[0])||void 0===t?void 0:t.data,spaceUserInfo:null==A?void 0:A.spaceFactories.find(t=>t.user==e.sender),assetSupply:null!==(n=null==K?void 0:K.totalSupply)&&void 0!==n?n:0})}return(0,i.useEffect)(()=>{D(),M(),P()},[C,D]),(0,r.jsx)(r.Fragment,{children:K&&!1==K.isDelete?(0,r.jsxs)(s.Z,{sx:e=>({padding:"12px",background:"#312f5c"}),children:[(0,r.jsx)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsx)(r.Fragment,{children:!_&&(0,r.jsx)(u.M,{blockTimestamp:w.blockTimestamp,sender:w.sender,spaceUserInfo:null==A?void 0:A.spaceFactories.find(e=>e.user==w.sender),handleClick:()=>{S.push("/space-overview/?address=".concat(w.sender))},MoreBox:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j.e,{assetId:w.assetId,assetData:K})})})})}),(0,r.jsx)(a.Z,{sx:{mt:3,color:"#d7e2e3"},component:"div",onClick:()=>{N(w),S.push("/asset-overview/?assetid=".concat(w.assetId))},children:(0,r.jsx)(r.Fragment,{children:(null===(t=z[0])||void 0===t?void 0:t.data)&&(0,r.jsx)(r.Fragment,{children:Z.tq?(0,r.jsx)(I,{content:null===(p=z[0])||void 0===p?void 0:p.data}):(0,r.jsx)(h,{content:null===(n=z[0])||void 0===n?void 0:n.data})})})}),(0,r.jsxs)(a.Z,{sx:{mt:3,pt:1,borderTop:"1px solid #434b59",display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(a.Z,{children:!q&&(0,r.jsx)(v,{replyCount:null==L?void 0:null===(f=L.spaceCounts.find(e=>e.parentId==w.assetId))||void 0===f?void 0:f.count,handleClick:()=>{N(w),S.push("/asset-overview/?assetid=".concat(w.assetId,"&reply=1"))}})}),(0,r.jsxs)(a.Z,{sx:{display:"flex",gap:4},children:[(0,r.jsx)(g.H,{assetId:w.assetId,totalSupply:null!==(m=K.totalSupply)&&void 0!==m?m:0,handleClick:()=>{N(w)}}),(0,r.jsx)(y.p,{assetId:w.assetId,holdersCount:null!==(b=K.totalHolders)&&void 0!==b?b:0,handleClick:()=>{N(w)}})]})]})]}):(0,r.jsx)(r.Fragment,{})})}},97975:function(e,t,n){n.d(t,{TX:function(){return u},bo:function(){return x},c1:function(){return c},k:function(){return d},lv:function(){return l},r2:function(){return o}});var r=n(31065),s=n(46154),a=n(99673),i=n(88144);let l=e=>{let t=(0,r.Yh)(e=>e.fetchArweaveData),n=(0,a.h)({queries:e.map(e=>({queryKey:["arweaveData",e],queryFn:()=>t(e),refetchInterval:6e4}))});return n},c=e=>{let{data:t,error:n}=(0,i.a)({queryKey:["useGetTransactionInfo",e],queryFn:()=>(0,s.Q1)(e),refetchInterval:6e4});return n?void 0:t},o=e=>{let t=(0,r.Yh)(e=>e.getBuyPrice),n=(0,a.h)({queries:e.map(e=>({queryKey:["getBuyPrice",e.assetId,e.totalSupply],queryFn:()=>t(e.assetId,1,e.totalSupply),refetchInterval:6e4}))});return n},d=(e,t)=>{let n=(0,r.Yh)(e=>e.getBuyPrice),{data:s,error:a}=(0,i.a)({queryKey:["getBuyPrice",e,t],queryFn:()=>n(e,1,t),refetchInterval:6e4});return{data:s,error:a}},u=(e,t,n)=>{let s=(0,r.Yh)(e=>e.getSellPrice),{data:a,error:l}=(0,i.a)({queryKey:["getSellPrice",e,t,n],queryFn:()=>s(e,1,t),refetchInterval:6e4});return{data:a,error:l}},x=(e,t,n)=>{let s=(0,r.Yh)(e=>e.getBalanceByAccount_Asset),{data:a,error:l}=(0,i.a)({queryKey:["getBalanceByAccount_Asset",t,e,n],queryFn:()=>s(e,t),refetchInterval:6e4});return{data:a,error:l}}}}]);