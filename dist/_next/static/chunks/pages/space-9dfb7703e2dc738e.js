(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{795:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/space",function(){return r(3186)}])},3186:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return _}});var t=r(5893),a=r(5616),n=r(7294),d=r(9766),o=r(2695),l=r(2729),i=r(2138),c=r(2292),u=r(1065),x=r(8806),p=r(6312),f=r(629),h=r(5861),m=r(2027),v=r(9479),j=r(1163),w=r(5751);function Z(){let e=(0,l._)(["\n  query GetUsers {\n     users(orderBy: totalTrades, orderDirection: desc) {\n        address \n        assets {\n           assetId\n           amount\n            asset {\n                totalSupply\n                totalTrades \n                totalFees\n                totalHolders\n                creator {\n                  address\n                }\n            }\n        }\n    }\n  }\n"]);return Z=function(){return e},e}let g=(0,x.Ps)(Z());function y(){var e,s;let r=(0,j.useRouter)(),{currentTimestamp:d}=(0,u.Yh)(),{loading:o,error:l,data:x,refetch:v}=(0,p.a)(g,{variables:{},pollInterval:6e4});(0,n.useEffect)(()=>{v()},[d,v]);let Z=(null==x?void 0:null===(e=x.users)||void 0===e?void 0:e.map(e=>e.address))||[],y=(0,w.kX)(Z),_=y?y.filter(e=>!e.isContract).map(e=>e.address):[],T=(null==x?void 0:null===(s=x.users)||void 0===s?void 0:s.filter(e=>_.indexOf(e.address)>-1).map(e=>{let s=e.assets.map(s=>({assetId:s.assetId,amount:s.amount,userAddress:e.address,totalSupply:s.asset.totalSupply,totalTrades:s.asset.totalTrades,totalFees:s.asset.totalFees,totalHolders:s.asset.totalHolders,creatorAddress:s.asset.creator.address})).filter(e=>e.userAddress===e.creatorAddress?e.totalTrades>=0:e.totalTrades>1);return s}))||[],D=(0,i.SV)(_);return(console.log({name:"SpaceList--------------------",eoaAddresses:_,usersArray:T,userSpaceQueries:D}),o)?(0,t.jsx)("p",{children:"Loading..."}):l?(0,t.jsxs)("p",{children:["Error: ",l.message]}):(0,t.jsx)(a.Z,{children:(0,t.jsxs)(f.Z,{sx:e=>({background:"#312f5c"}),children:[(0,t.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:2,mt:4,padding:"12px",cursor:"pointer","&:hover":{backgroundColor:"#3e3c76"}},children:[(0,t.jsx)(a.Z,{children:" "}),(0,t.jsx)(a.Z,{children:(0,t.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:6},children:[(0,t.jsx)(a.Z,{sx:{width:"90px"},children:(0,t.jsx)(h.Z,{variant:"secondary16",color:"text.secondary",children:"Holders"})}),(0,t.jsx)(a.Z,{sx:{width:"110px"},children:(0,t.jsx)(h.Z,{variant:"secondary16",color:"text.secondary",children:"Total Amount"})})]})})]}),null==D?void 0:D.filter(e=>void 0!==e.data&&e.data.spaceAddress!==c._).map((e,s)=>(0,t.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:2,mt:4,padding:"12px",cursor:"pointer","&:hover":{backgroundColor:"#3e3c76"}},component:"div",onClick:()=>{r.push("/space-overview/?address=".concat(e.data.address))},children:[(0,t.jsx)(a.Z,{children:(0,t.jsx)(m.v,{sender:e.data.address,spaceUserInfo:e.data,imgWidth:48,showSpaceId:!0})}),(0,t.jsx)(a.Z,{children:(0,t.jsx)(b,{formattedData:T[s]})})]},s))]})})}function b(e){var s;let{formattedData:r}=e,{ethPrice:n}=(0,u.Yh)(),d=(0,w.r2)(null!=r?r:[]),o=r?r.map((e,r)=>{var t;return{...e,amountETH:null!==(s=null===(t=d[r])||void 0===t?void 0:t.data)&&void 0!==s?s:0}}):[],l=o.reduce((e,s)=>e+Number(s.amount)*Number(s.amountETH),0),i=o.reduce((e,s)=>e+Number(s.totalHolders),0);return console.log({name:"spacetrade-------------------",formattedData:r,buyPrices:d,totalAmountETH:l,totalHolders:i}),(0,t.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",gap:6},children:[(0,t.jsx)(a.Z,{sx:{width:"80px"},children:(0,t.jsx)(v.B,{value:i,variant:"main16",compact:!0,visibleDecimals:0})}),(0,t.jsx)(a.Z,{sx:{width:"110px"},children:(0,t.jsx)(v.B,{value:Number(l)*(null!=n?n:0),variant:"main16",compact:!0,visibleDecimals:2,symbol:"USD"})})]})}function _(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.Z,{children:(0,t.jsxs)(a.Z,{sx:{display:"flex",flex:1,flexDirection:"column",gap:4},children:[(0,t.jsx)(o.d,{}),(0,t.jsx)(y,{})]})})})}}},function(e){e.O(0,[498,986,395,298,766,129,774,888,179],function(){return e(e.s=795)}),_N_E=e.O()}]);